## 1. CommerceServerTest (Commerce 도메인)
테스트 범위: 통합 테스트 

주요 항목:

주문 생성 (Order Creation)

결제 확정 (Payment Confirmation)

🔴 특이사항:

순환 참조(Circular Reference) 발생: 주문 및 결제 프로세스 간 의존성 문제로 인한 오류 확인.

## 2. CryptoServerTest (Crypto 도메인)
테스트 범위: 통합 테스트

주요 항목:

충전, 지갑 기록 조회, 결제 준비, 결제 확정, 결제 취소, 장부 조회

🟢 특이사항: 없음 (정상 동작)

지금까지 작성하고 수행하신 테스트 내역을 문서화하기 좋게 **파일 경로**와 **테스트 명(Display Name)** 기준으로 정리해 드립니다. 보고서나 PR 본문에 그대로 복사해서 사용하시면 됩니다.

---

## 3. AccountServerTest (Account 도메인)

### 1. 서비스 단위 테스트 (Unit Test)

**파일 위치:** `src/test/java/com/example/cryptoorder/Account/service/UserAccountServiceTest.java`

| 테스트 구분 | Display Name (테스트 케이스 명) | 검증 내용 |
| --- | --- | --- |
| **회원가입** | `회원가입 성공 시 User, Account, Point 지갑이 모두 생성되어야 한다` | 회원가입 요청 시 3가지 핵심 엔티티가 정상적으로 생성 및 연관관계가 맺어지는지 검증 |
| **회원탈퇴** | `계좌에 잔액이 남아있는 사용자는 탈퇴할 수 없다` | 잔액이 남아있는 상태에서 탈퇴 시도 시, 비즈니스 예외(IllegalStateException)가 발생하여 탈퇴가 차단되는지 검증 |

**파일 위치:** `src/test/java/com/example/cryptoorder/Account/service/BankAccountServiceTest.java`

| 테스트 구분 | Display Name (테스트 케이스 명) | 검증 내용 |
| --- | --- | --- |
| **출금 검증** | `잔액보다 큰 금액을 출금하려 하면 예외가 발생해야 한다` | 보유 잔액보다 큰 금액을 요청했을 때, 로직이 수행되지 않고 예외 처리되는지 단위 테스트로 검증 |

---

### 2. 동시성 통합 테스트 (Concurrency Integration Test)

**파일 위치:** `src/test/java/com/example/cryptoorder/Account/service/BankAccountServiceConcurrencyTest.java`

| 테스트 구분 | Display Name (테스트 케이스 명) | 검증 내용 |
| --- | --- | --- |
| **입금 동시성** | `동시에 100번 입금 요청 시 잔액 정합성이 보장되어야 한다 (비관적 락 검증)` | 100개의 스레드가 동시에 입금을 시도할 때, Race Condition으로 인한 갱신 유실(Lost Update) 없이 잔액이 정확히 합산되는지 검증 |
| **출금 동시성** | `동시에 출금 요청 시 잔액 부족으로 일부 요청만 성공해야 한다 (동시성 제어 + 예외 처리)` | 잔액이 부족한 상황에서 여러 요청이 동시에 들어올 때, 정확히 잔액만큼만 출금되고 나머지는 실패 처리되는지 검증 (마이너스 통장 방지) |

---

### ✅ 종합 결과

* **수행 결과:** All Tests Passed (Build Successful)
* **커버리지:**
* 핵심 비즈니스 로직(가입, 탈퇴, 입출금) 정합성 검증 완료
* 고위험 구간(입출금 동시성 이슈)에 대한 스레드 안전성(Thread-Safety) 검증 완료

## 4. 공통 이슈 (Common Issues)
⚠️ 동시성 테스트 (Concurrency & Race Condition):

다중 요청 발생 시 경쟁 상태(Race Condition)에 대한 검증 필요 및 관련 문제 식별됨.


