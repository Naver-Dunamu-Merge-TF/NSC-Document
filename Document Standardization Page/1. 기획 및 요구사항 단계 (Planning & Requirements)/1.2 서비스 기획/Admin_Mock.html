<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSC Admin Mock</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM (UMD) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel Standalone -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons (UMD) -->
    <script src="https://unpkg.com/lucide-react@latest"></script>
    <!-- If Lucide React UMD is not available easily, we will use Lucide global script and custom wrapper, 
         but for simplicity, we'll try to use a mechanism that works. 
         Actually, lucide-react doesn't have a reliable UMD. 
         So we will use 'lucide' vanilla and a helper or just esm imports in babel.
    -->
    <style>
        /* Custom tweaks */
        body { background-color: #f4f7f6; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect } from 'https://esm.sh/react@18.2.0';
        import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client';
        import {
            BarChart3,
            Activity,
            ShieldAlert,
            Users,
            Database,
            ArrowRightLeft,
            AlertTriangle,
            RefreshCw,
            Search,
            ExternalLink,
            Lock,
            CheckCircle,
            XCircle,
            ShieldCheck,
            FileText,
            Zap,
            Bell
        } from 'https://esm.sh/lucide-react@0.294.0';

        const AdminApp = () => {
            const [tab, setTab] = useState('dashboard');
            const [isEmergencyActive, setIsEmergencyActive] = useState(false);

            // 가상의 실시간 통계 데이터 (Enterprise 수준)
            const stats = {
                totalSupply: 5840200000,
                reserveKrw: 5840200000,
                activeUsers: 124500,
                todayTx: 45200,
                pendingSettlement: 120500000,
                fraudAlerts: 3
            };

            // 최근 트랜잭션 로그
            const recentTransactions = [
                { id: 'TX-98212', user: 'user_01', type: 'PAYMENT', amount: 15000, status: 'COMPLETED', time: '14:22:05' },
                { id: 'TX-98211', user: 'user_22', type: 'CHARGE', amount: 100000, status: 'COMPLETED', time: '14:21:58' },
                { id: 'TX-98210', user: 'merchant_9', type: 'SETTLE', amount: 2450000, status: 'PENDING', time: '14:21:30' },
                { id: 'TX-98209', user: 'user_54', type: 'PAYMENT', amount: 5900, status: 'FAILED', time: '14:20:12' },
            ];

            // 관리자 행동 로그 (누가 무엇을 조작했는지 - 대기업 필수 기능)
            const auditLogs = [
                { admin: 'Admin_Kim', action: 'User_Freeze', target: 'user_882', time: '13:05:22' },
                { admin: 'System_Auto', action: 'Reserve_Sync', target: 'Azure_SQL', time: '12:00:01' },
                { admin: 'Admin_Lee', action: 'FDS_Rule_Update', target: 'Risk_Module', time: '10:45:10' },
            ];

            const StatCard = ({ title, value, icon: Icon, color, subValue }) => (
                <div className="bg-white p-6 rounded-xl border border-gray-100 shadow-sm transition-all hover:shadow-md">
                    <div className="flex justify-between items-start mb-4">
                        <div className={`p-2 rounded-lg ${color}`}>
                            <Icon className="w-5 h-5 text-white" />
                        </div>
                        <span className="text-xs font-bold text-green-500 font-mono">+2.4%</span>
                    </div>
                    <p className="text-gray-500 text-sm mb-1 font-medium">{title}</p>
                    <h3 className="text-2xl font-bold text-gray-900 mb-1">{value}</h3>
                    {subValue && <p className="text-[10px] text-gray-400 font-mono">{subValue}</p>}
                </div>
            );

            return (
                <div className="flex h-screen bg-[#f4f7f6] font-sans overflow-hidden">
                    {/* 사이드바 - 대기업 표준 레이아웃 */}
                    <div className="w-64 bg-[#0f172a] text-white flex flex-col shrink-0">
                        <div className="p-6 flex items-center gap-3 border-b border-white/5">
                            <div className="w-8 h-8 bg-[#03C75A] rounded-md flex items-center justify-center font-bold text-white">N
                            </div>
                            <div>
                                <span className="font-bold tracking-tight text-base block">NSC Platform</span>
                                <span className="text-[10px] text-gray-400 uppercase tracking-widest">Management Console</span>
                            </div>
                        </div>

                        <nav className="flex-1 mt-6 px-3 space-y-1">
                            <button onClick={()=> setTab('dashboard')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg
                                transition-all ${tab === 'dashboard' ? 'bg-[#03C75A] text-white shadow-lg shadow-green-900/20' :
                                'text-gray-400 hover:bg-white/5 hover:text-white'}`}>
                                <BarChart3 className="w-5 h-5" /> 대시보드
                            </button>
                            <button onClick={()=> setTab('ledger')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg
                                transition-all ${tab === 'ledger' ? 'bg-[#03C75A] text-white' : 'text-gray-400 hover:bg-white/5
                                hover:text-white'}`}>
                                <Database className="w-5 h-5" /> 원장 및 자산 추적
                            </button>
                            <button
                                className="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-white/5 hover:text-white transition-all">
                                <ShieldAlert className="w-5 h-5" /> 이상 거래 (FDS)
                            </button>
                            <button
                                className="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-white/5 hover:text-white transition-all">
                                <ShieldCheck className="w-5 h-5" /> KYC 및 규제 준수
                            </button>
                            <button
                                className="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-white/5 hover:text-white transition-all">
                                <Users className="w-5 h-5" /> 가맹점 정산 관리
                            </button>
                            <div className="pt-4 pb-2 px-4 text-[10px] font-bold text-gray-500 uppercase tracking-widest">System</div>
                            <button
                                className="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-white/5 hover:text-white transition-all">
                                <Activity className="w-5 h-5" /> Azure 서비스 상태
                            </button>
                            <button
                                className="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-white/5 hover:text-white transition-all">
                                <FileText className="w-5 h-5" /> 감사 로그 (Audit)
                            </button>
                        </nav>

                        <div className="p-4 bg-white/5 m-4 rounded-xl border border-white/10">
                            <div className="flex items-center justify-between mb-2">
                                <span className="text-[10px] font-bold text-gray-400 uppercase">Emergency</span>
                                <div className={`w-2 h-2 rounded-full ${isEmergencyActive ? 'bg-red-500 animate-ping' : 'bg-green-500'
                                    }`}></div>
                            </div>
                            <button onClick={()=> setIsEmergencyActive(!isEmergencyActive)}
                                className={`w-full py-2 rounded-lg text-[11px] font-bold transition-all ${isEmergencyActive ?
                                'bg-red-600 text-white' : 'bg-white/10 text-gray-300 hover:bg-white/20'}`}
                                >
                                {isEmergencyActive ? 'SYSTEM RESUME' : 'CIRCUIT BREAKER'}
                            </button>
                        </div>
                    </div>

                    {/* 메인 콘텐츠 */}
                    <div className="flex-1 flex flex-col overflow-hidden">
                        {/* 상단 바 - 대기업 특유의 깔끔한 디자인 */}
                        <header className="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-8 shrink-0 z-10">
                            <div className="flex items-center gap-4">
                                <h1 className="text-lg font-bold text-gray-800">시스템 총괄 대시보드</h1>
                                <div className="flex gap-1">
                                    <span
                                        className="px-2 py-0.5 bg-blue-50 text-blue-600 text-[10px] font-bold rounded">Mainnet-Alpha</span>
                                    <span className="px-2 py-0.5 bg-green-50 text-green-600 text-[10px] font-bold rounded">Live</span>
                                </div>
                            </div>

                            <div className="flex items-center gap-6">
                                <div
                                    className="flex items-center gap-2 text-xs font-medium text-gray-500 bg-gray-50 px-3 py-1.5 rounded-full border border-gray-100">
                                    <RefreshCw className="w-3.5 h-3.5 animate-spin-slow" />
                                    Auto Refresh: 5s
                                </div>
                                <div className="relative">
                                    <Bell className="w-5 h-5 text-gray-400" />
                                    <span
                                        className="absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] flex items-center justify-center rounded-full border-2 border-white">2</span>
                                </div>
                                <div className="flex items-center gap-3 border-l pl-6">
                                    <div className="text-right">
                                        <p className="text-xs font-bold text-gray-900">TF_Lead_Admin</p>
                                        <p className="text-[10px] text-gray-400">Master Level</p>
                                    </div>
                                    <div className="w-9 h-9 rounded-full bg-gradient-to-tr from-[#03C75A] to-[#093687]"></div>
                                </div>
                            </div>
                        </header>

                        {/* 메인 콘텐츠 영역 */}
                        <main className="flex-1 p-8 overflow-y-auto space-y-8">
                            {isEmergencyActive && (
                            <div className="bg-red-50 border-2 border-red-200 p-4 rounded-xl flex items-center gap-4 animate-pulse">
                                <AlertTriangle className="w-6 h-6 text-red-600" />
                                <div>
                                    <p className="text-red-800 font-bold">서킷 브레이커 발동 중</p>
                                    <p className="text-red-600 text-xs">현재 모든 신규 결제가 차단되었습니다. 대기 중인 트랜잭션만 처리됩니다.</p>
                                </div>
                                <button className="ml-auto px-4 py-2 bg-red-600 text-white text-xs font-bold rounded-lg">상황실 보고</button>
                            </div>
                            )}

                            {/* 주요 지표 그리드 (핵심 자산 관리) */}
                            <div className="grid grid-cols-4 gap-6">
                                <StatCard title="전체 NSC 발행량" value="5,840,200,000" icon={Database} color="bg-[#03C75A]"
                                    subValue="Contract: 0xNSC_Main_v2" />
                                <StatCard title="KRW 준비금 예치현황" value="5,840,200,000" icon={Lock} color="bg-[#093687]"
                                    subValue="Vault: Naver Bank Branch" />
                                <StatCard title="금일 결제 건수" value="45,200건" icon={ArrowRightLeft} color="bg-orange-500"
                                    subValue="Avg. Latency: 124ms" />
                                <StatCard title="미정산 대기 금액" value="120,500,000" icon={Zap} color="bg-indigo-500"
                                    subValue="Settle Window: 24h" />
                            </div>

                            <div className="grid grid-cols-3 gap-6">
                                {/* 실시간 트랜잭션 (백엔드 main.py 로그 기반) */}
                                <div
                                    className="col-span-2 bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden flex flex-col">
                                    <div className="p-6 border-b border-gray-50 flex justify-between items-center">
                                        <div>
                                            <h3 className="font-bold text-gray-800">실시간 원장 탐색기</h3>
                                            <p className="text-xs text-gray-400 mt-1">모든 동결(Freeze) 및 정산(Settle) 로그</p>
                                        </div>
                                        <div className="flex gap-2">
                                            <button className="p-2 hover:bg-gray-50 rounded-lg border border-gray-200">
                                                <Search className="w-4 h-4 text-gray-400" />
                                            </button>
                                            <button className="text-xs text-blue-600 font-bold px-3 py-1.5 bg-blue-50 rounded-lg">CSV
                                                다운로드</button>
                                        </div>
                                    </div>
                                    <div className="overflow-x-auto">
                                        <table className="w-full text-left text-sm">
                                            <thead className="bg-gray-50/50 text-gray-400 font-medium">
                                                <tr>
                                                    <th className="px-6 py-3 text-[11px] uppercase tracking-wider">TX ID</th>
                                                    <th className="px-6 py-3 text-[11px] uppercase tracking-wider">유형</th>
                                                    <th className="px-6 py-3 text-[11px] uppercase tracking-wider text-right">금액 (NSC)
                                                    </th>
                                                    <th className="px-6 py-3 text-[11px] uppercase tracking-wider">상태</th>
                                                    <th className="px-6 py-3 text-[11px] uppercase tracking-wider text-right">시간</th>
                                                </tr>
                                            </thead>
                                            <tbody className="divide-y divide-gray-50">
                                                {recentTransactions.map((tx) => (
                                                <tr key={tx.id} className="hover:bg-gray-50/50 transition-colors group cursor-pointer">
                                                    <td className="px-6 py-4 font-mono text-xs text-gray-400 group-hover:text-blue-600">
                                                        {tx.id}</td>
                                                    <td className="px-6 py-4 text-xs">
                                                        <span className={`px-2 py-0.5 rounded font-bold ${ tx.type==='PAYMENT'
                                                            ? 'text-orange-600 bg-orange-50' : tx.type==='CHARGE'
                                                            ? 'text-blue-600 bg-blue-50' : 'text-green-600 bg-green-50'
                                                            }`}>{tx.type}</span>
                                                    </td>
                                                    <td className="px-6 py-4 text-right font-bold text-gray-700">
                                                        {tx.amount.toLocaleString()}</td>
                                                    <td className="px-6 py-4">
                                                        <div className="flex items-center gap-1.5 font-semibold text-xs">
                                                            {tx.status === 'COMPLETED' ?
                                                            <CheckCircle className="w-3.5 h-3.5 text-green-500" /> :
                                                            <XCircle className="w-3.5 h-3.5 text-red-500" />}
                                                            <span>{tx.status}</span>
                                                        </div>
                                                    </td>
                                                    <td className="px-6 py-4 text-gray-400 text-xs text-right font-mono">{tx.time}</td>
                                                </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                {/* 감사 로그 및 시스템 요약 (대기업용) */}
                                <div className="space-y-6">
                                    <div className="bg-[#1e293b] rounded-xl p-6 text-white shadow-xl">
                                        <div className="flex items-center justify-between mb-6">
                                            <h3 className="font-bold flex items-center gap-2 text-sm">
                                                <FileText className="w-4 h-4 text-blue-400" /> 시스템 관리 기록 (Audit)
                                            </h3>
                                            <button className="text-[10px] text-gray-400 hover:text-white">전체보기</button>
                                        </div>
                                        <div className="space-y-4">
                                            {auditLogs.map((log, i) => (
                                            <div key={i} className="flex gap-3 text-xs border-l-2 border-white/10 pl-3">
                                                <div className="flex-1">
                                                    <p className="font-bold text-gray-200">{log.action}</p>
                                                    <p className="text-gray-400 text-[10px] mt-0.5">by {log.admin} on {log.target}</p>
                                                </div>
                                                <span className="text-[10px] text-gray-500 font-mono italic">{log.time}</span>
                                            </div>
                                            ))}
                                        </div>
                                    </div>

                                    <div className="bg-white rounded-xl border border-gray-100 p-6 shadow-sm">
                                        <h3 className="font-bold mb-4 text-sm text-gray-800 flex items-center gap-2">
                                            <ShieldAlert className="w-4 h-4 text-orange-500" /> 리스크 탐지 현황
                                        </h3>
                                        <div className="space-y-3">
                                            <div className="flex justify-between items-center p-3 bg-red-50 rounded-lg">
                                                <span className="text-xs font-bold text-red-700">고액 환전 시도</span>
                                                <span
                                                    className="px-2 py-0.5 bg-red-600 text-white text-[10px] rounded font-bold italic">High</span>
                                            </div>
                                            <div className="flex justify-between items-center p-3 bg-orange-50 rounded-lg">
                                                <span className="text-xs font-bold text-orange-700">중복 IP 결제 요청</span>
                                                <span
                                                    className="px-2 py-0.5 bg-orange-500 text-white text-[10px] rounded font-bold italic">Mid</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </main>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<AdminApp />);
    </script>
</body>
</html>